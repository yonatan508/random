<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>注专转 转  - 专住转 砖拽</title>
    <style>
        :root {
            --brand-deep: #0f172a;
            --brand-primary: #3b82f6;
            --brand-light: #eff6ff;
            --border-subtle: #e2e8f0;
            --success: #10b981;
            --text-main: #334155;
        }

        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background-color: #f1f5f9;
            margin: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        /* 住专  注爪 */
        ::-webkit-scrollbar { width: 6px; }
        ::-webkit-scrollbar-track { background: #f1f5f9; }
        ::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 10px; }

        /* 住 砖拽 */
        #launch-screen {
            text-align: center;
            background: white;
            padding: 50px;
            border-radius: 24px;
            box-shadow: 0 20px 25px -5px rgba(0, 0, 0, 0.1);
            max-width: 400px;
            width: 90%;
            transition: opacity 0.5s ease;
        }

        .launch-btn {
            background: var(--brand-primary);
            color: white;
            border: none;
            padding: 16px 32px;
            font-size: 1.1rem;
            font-weight: 700;
            border-radius: 12px;
            cursor: pointer;
            box-shadow: 0 10px 15px -3px rgba(59, 130, 246, 0.3);
            transition: all 0.2s;
        }

        .launch-btn:hover { background: #2563eb; transform: translateY(-2px); }

        /* 转 驻拽爪 专 */
        #main-app {
            display: none; /* 住转专 转 */
            width: 100%;
            max-width: 1000px;
            padding: 20px;
            animation: fadeIn 0.6s ease-out;
        }

        .master-card {
            background: white;
            border-radius: 16px;
            overflow: hidden;
            box-shadow: 0 4px 6px rgba(0,0,0,0.05);
            border: 1px solid var(--border-subtle);
            margin-bottom: 24px;
        }

        .app-header {
            background: var(--brand-deep);
            color: white;
            padding: 20px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        table { width: 100%; border-collapse: collapse; background: white; }
        th { background: #f8fafc; padding: 16px; text-align: right; border-bottom: 2px solid var(--brand-light); color: var(--brand-deep); font-size: 0.9rem; }
        td { padding: 16px; border-bottom: 1px solid var(--border-subtle); border-left: 1px solid #f8fafc; }
        
        tr.active-row { 
            background-color: var(--brand-light); 
            border-right: 5px solid var(--brand-primary); 
        }

        /*  转 转专 */
        .detail-container {
            display: none;
            background: white;
            border-radius: 16px;
            border: 1px solid var(--border-subtle);
            box-shadow: 0 10px 15px rgba(0,0,0,0.1);
            resize: vertical; /* 砖   */
            overflow: hidden;
            min-height: 300px;
        }

        .detail-header {
            padding: 16px 24px;
            background: #fff;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .iframe-scroll-area {
            height: calc(100% - 60px);
            overflow: auto;
        }

        iframe { width: 100%; height: 600px; border: none; }

        .copy-badge {
            background: var(--success);
            color: white;
            padding: 8px 16px;
            border-radius: 8px;
            border: none;
            cursor: pointer;
            font-weight: 600;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body>

    <div id="launch-screen">
        <div style="font-size: 3rem; margin-bottom: 20px;"></div>
        <h2 style="color: var(--brand-deep)">注专转 转 转</h2>
        <p style="color: #64748b; margin-bottom: 30px;">抓 注 驻转专  注 转 住 转 住.</p>
        <button class="launch-btn" onclick="launchApp()">驻注 转转</button>
    </div>

    <div id="main-app">
        <div class="master-card">
            <div class="app-header">
                <h3 style="margin:0"> 拽专 专</h3>
                <div id="filter-tag" style="background: rgba(255,255,255,0.1); padding: 5px 15px; border-radius: 8px; font-size: 0.9rem;"></div>
            </div>
            <table>
                <thead>
                    <tr>
                        <th> 拽专</th>
                        <th>住 注</th>
                        <th>驻注</th>
                    </tr>
                </thead>
                <tbody>
                    <tr id="row-only_a">
                        <td><b>拽专 '</b></td>
                        <td>转 拽</td>
                        <td><button class="launch-btn" style="padding: 6px 12px; font-size: 0.8rem;" onclick="openDetails('only_a')">注 驻专</button></td>
                    </tr>
                    <tr id="row-a_and_b">
                        <td><b>砖转祝 (' + ')</b></td>
                        <td>住专 专-注专转</td>
                        <td><button class="launch-btn" style="padding: 6px 12px; font-size: 0.8rem;" onclick="openDetails('a_and_b')">注 驻专</button></td>
                    </tr>
                    <tr id="row-only_b">
                        <td><b>拽专 '</b></td>
                        <td>拽专转 爪</td>
                        <td><button class="launch-btn" style="padding: 6px 12px; font-size: 0.8rem;" onclick="openDetails('only_b')">注 驻专</button></td>
                    </tr>
                </tbody>
            </table>
        </div>

        <div id="detail-view" class="detail-container">
            <div class="detail-header">
                <h4 id="view-title" style="margin:0; color: var(--brand-deep)">转爪转 转 驻专转</h4>
                <button class="copy-badge" onclick="copyIframeTable()">注转拽 转 拽住 </button>
            </div>
            <div class="iframe-scroll-area">
                <iframe id="dataFrame"></iframe>
            </div>
        </div>
    </div>

<script>
    // 1. 转  (转 祝 -JSON 砖驻拽 -Pandas)
    const datasets = {
        only_a: {
            "转转 拽专 '": [{ "": "A-100", "注专": "注" }, { "": "A-200", "注专": "转拽" }],
            "转转 拽专 '": [],
            "转转 拽专 '": [{ "拽": "G-9", "转专": "拽" }]
        },
        a_and_b: {
            "转转 拽专 '": [{ "住专": "驻注", "": "2ms" }],
            "转转 拽专 '": [{ "住住": "爪" }],
            "转转 拽专 '": [{ "专住": "V3.1" }]
        },
        only_b: {
            "转转 拽专 '": [],
            "转转 拽专 '": [{ "砖转砖": "Admin", "砖": "" }],
            "转转 拽专 '": []
        }
    };

    let activeFilter = 10;

    // 驻拽爪转 砖拽
    function launchApp() {
        // 砖转 驻专专
        const params = new URLSearchParams(window.location.search);
        activeFilter = params.get('blue_time') || 10;

        document.getElementById('filter-tag').innerText = `住 驻注 (blue_time): ${activeFilter}`;
        
        // 注专  住
        document.getElementById('launch-screen').style.opacity = '0';
        setTimeout(() => {
            document.getElementById('launch-screen').style.display = 'none';
            document.getElementById('main-app').style.display = 'block';
            document.body.style.alignItems = 'flex-start'; // 砖 砖专 转爪
        }, 500);
    }

    function openDetails(key) {
        // 爪 砖 砖专 驻注
        document.querySelectorAll('tr').forEach(r => r.classList.remove('active-row'));
        document.getElementById(`row-${key}`).classList.add('active-row');

        const container = document.getElementById('detail-view');
        const frame = document.getElementById('dataFrame');
        const rawData = datasets[key];

        // 转 转 专拽  砖  转 (, , )
        let htmlParts = "";
        for (const [subName, rows] of Object.entries(rawData)) {
            if (rows.length > 0) {
                const headers = Object.keys(rows[0]).map(h => `<th>${h}</th>`).join('');
                const body = rows.map(r => `<tr>${Object.values(r).map(v => `<td>${v}</td>`).join('')}</tr>`).join('');
                
                htmlParts += `
                    <div style="margin-bottom: 30px;">
                        <h4 style="color:#2563eb; border-right: 4px solid #2563eb; padding-right:10px; margin-bottom:10px;">${subName}</h4>
                        <table style="width:100%; border-collapse:collapse; font-size:13px;">
                            <thead><tr>${headers}</tr></thead>
                            <tbody>${body}</tbody>
                        </table>
                    </div>`;
            }
        }

        const fullIframeHtml = `
            <html dir="rtl">
            <head>
                <style>
                    body { font-family: sans-serif; padding: 10px; color: #334155; }
                    table { border: 1px solid #e2e8f0; }
                    th { background: #f8fafc; padding: 12px; text-align: right; border: 1px solid #e2e8f0; }
                    td { padding: 12px; border: 1px solid #e2e8f0; text-align: right; }
                </style>
            </head>
            <body>${htmlParts}</body>
            </html>`;

        container.style.display = 'block';
        const doc = frame.contentWindow.document;
        doc.open();
        doc.write(fullIframeHtml);
        doc.close();
        
        container.scrollIntoView({ behavior: 'smooth' });
    }

    // 驻拽爪转 注转拽  拽住 (注转拽 专拽 转 转)
    function copyIframeTable() {
        const frameDoc = document.getElementById('dataFrame').contentWindow.document;
        const tables = frameDoc.querySelectorAll('table');
        let clipboardText = "";

        tables.forEach(table => {
            const rows = Array.from(table.querySelectorAll('tr'));
            clipboardText += rows.map(row => 
                Array.from(row.querySelectorAll('th, td')).map(cell => cell.innerText).join('\t')
            ).join('\n') + "\n\n";
        });

        navigator.clipboard.writeText(clipboardText).then(() => {
            alert("转 注转拽! 转 拽 注转 拽住.");
        });
    }
</script>

</body>
</html>
